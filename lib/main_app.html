<!--
  Copyright (c) 2014, <your name>. All rights reserved. Use of this source code
  is governed by a BSD-style license that can be found in the LICENSE file.
-->

<!-- import polymer-element's definition -->
<link rel="import" href="../../packages/polymer/polymer.html">

<link rel="import" href="../../packages/core_elements/core_icon_button.html">
<link rel="import" href="../../packages/core_elements/core_splitter.html">
<link rel="import" href="../../packages/core_elements/core_toolbar.html">
<link rel="import" href="../../packages/paper_elements/paper_autogrow_textarea.html">
<link rel="import" href="../../packages/paper_elements/paper_input_decorator.html">

<polymer-element name="main-app" layout vertical>
  <template>
    <style>
      iframe {
        width: 100%;
        height: 100%;
        border: 0;
      }
    </style>

    <core-toolbar>
      <core-icon-button icon="save" on-tap="{{save}}"></core-icon-button>
      <core-icon-button icon="file-download" on-tap="{{load}}"></core-icon-button>
      <div flex>DartLab</div>
    </core-toolbar>
    <div horizontal layout flex>
      <div flex vertical layout>
        <div flex>
          <paper-input-decorator label="HTML" floatinglabel layout vertical flex>
            <paper-autogrow-textarea>
              <textarea value="{{html}}" placeholder aria-label="HTML"></textarea>
            </paper-autogrow-textarea>
          </paper-input-decorator>
        </div>
        <core-splitter direction="up"></core-splitter>
        <div flex>
          <paper-input-decorator label="Dart" floatinglabel layout vertical flex>
            <paper-autogrow-textarea rows="2">
              <textarea value="{{dart}}" placeholder aria-label="Dart"></textarea>
            </paper-autogrow-textarea>
          </paper-input-decorator>
        </div>
      </div>
      <core-splitter direction="left"></core-splitter>
      <div flex vertical layout>
        <div flex>
          <paper-input-decorator label="CSS" floatinglabel layout vertical flex>
            <paper-autogrow-textarea>
              <textarea value="{{css}}" placeholder aria-label="CSS"></textarea>
            </paper-autogrow-textarea>
          </paper-input-decorator>
        </div>
        <core-splitter direction="up"></core-splitter>
        <div relative flex>
          <iframe _src="{{toTemplate(html, css, dart) | base64('text/html')}}" sandbox="allow-scripts" fit>
          </iframe>
        </div>
      </div>
    </div>
  </template>
  <script type="application/dart" src="main_app.dart"></script>
</polymer-element>
